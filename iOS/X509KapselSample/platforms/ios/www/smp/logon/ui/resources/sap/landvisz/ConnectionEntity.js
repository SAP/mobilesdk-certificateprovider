/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.landvisz.ConnectionEntity");jQuery.sap.require("sap.landvisz.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.landvisz.ConnectionEntity",{metadata:{library:"sap.landvisz",properties:{"connectionId":{type:"string",group:"Data",defaultValue:null},"size":{type:"string",group:"Data",defaultValue:null},"type":{type:"sap.landvisz.ConnectionType",group:"Identification",defaultValue:null},"linkId":{type:"string",group:"Data",defaultValue:null},"linkedHeader":{type:"string",group:"Data",defaultValue:null},"dependencyTooltip":{type:"string",group:"Data",defaultValue:null},"showOverlay":{type:"boolean",group:"Data",defaultValue:true}},aggregations:{"connectionData":{type:"sap.landvisz.internal.LinearRowField",multiple:true,singularName:"connectionData"}}}});jQuery.sap.require("sap.landvisz.internal.LinearRowField");jQuery.sap.require("sap.ui.core.HTML");jQuery.sap.require("sap.ui.ux3.ToolPopup");
sap.landvisz.ConnectionEntity.prototype.init=function(){this.viewType;this.top=0;this.left=0;this.width=0;this.height=90;this.innerTop=0;this.innerLeft=0;this.innerWidth=0;this.innerHeight=0;this.holdDisplay=false;this.initializationDone=false};
sap.landvisz.ConnectionEntity.prototype.initControls=function(){if(!this.oVLayoutRows)this.oVLayoutRows=new sap.ui.commons.layout.VerticalLayout(this.getId()+"-ConnectionRowVLayout");if(!this.connectionLabel)this.connectionLabel=new sap.ui.commons.Label(this.getId()+"-connectionLabel");if(!this.connectionImage)this.connectionImage=new sap.ui.commons.Image(this.getId()+"-connectionImage");if(!this.oVLayoutCallout)this.oVLayoutCallout=new sap.ui.commons.layout.VerticalLayout(this.getId()+"-calloutVLayout");if(!this.oVLayoutToolPopup)this.oVLayoutToolPopup=new sap.ui.commons.layout.VerticalLayout(this.getId()+"-toolPopupVLayout");if(!this.calloutLabel)this.calloutLabel=new sap.ui.commons.Label(this.getId()+"-calloutLabel");if(!this.toolPopup){this.toolPopup=new sap.ui.ux3.ToolPopup(this.getId()+"toolpopup");this.toolPopup.addContent(this.oVLayoutToolPopup)}if(this.getType()==sap.landvisz.ConnectionType.ProductSystem)this.oVLayoutToolPopup.addStyleClass("sapLandviszCalloutPS productSystemPopup");if(this.getType()==sap.landvisz.ConnectionType.TechnicalSystem)this.oVLayoutToolPopup.addStyleClass("sapLandviszCalloutPS technicalSystemPopup");if(this.getType()==sap.landvisz.ConnectionType.MobileSolution)this.oVLayoutToolPopup.addStyleClass("sapLandviszCalloutPS mobileSolutionPopup");this.toolPopup.addStyleClass("sapLandviszCalloutPS");if(this.getSize()==sap.landvisz.EntityCSSSize.Small)this.oVLayoutToolPopup.addStyleClass("sapLandviszCalloutRowFieldSmall");else this.oVLayoutToolPopup.addStyleClass("sapLandviszCalloutRowField")};
sap.landvisz.ConnectionEntity.prototype.onclick=function(e){if(e.target.id==this.getId()+"connectionRow")e.srcControl.holdDisplay=!e.srcControl.holdDisplay;else this.holdDisplay=!this.holdDisplay;if(this.holdDisplay){if(this.viewType==sap.landvisz.DependencyType.NETWORK_VIEW){var i=jQuery.sap.byId(this.getId()+"connectionRow");this.toolPopup.setOpener(i);if(!this.toolPopup.isOpen()){this.toolPopup.setPosition(sap.ui.core.Popup.Dock.CenterBottom,sap.ui.core.Popup.Dock.CenterTop,i,"-10 0","fit");var p=jQuery.sap.byId(this.getId()+"toolpopup");this.toolPopup.open()}}this.fireEvent("connectionMouseover")}};
sap.landvisz.ConnectionEntity.prototype.onmouseenter=function(e){if(this.viewType==sap.landvisz.ViewType.SOLUTION_VIEW)e.stopImmediatePropagation();else if(e.target.id==this.getId()+"connectionRow"){var h=false;var t=false;for(var i=0;i<this.getParent().getConnectionEntities().length;i++){if(this.getParent().getConnectionEntities()[i].holdDisplay==true){if(this.getParent().getConnectionEntities()[i].getId()==this.getId()){h=true;t=true}else{h=true}}}if((!h)||(t&&h)){if(this.viewType==sap.landvisz.DependencyType.NETWORK_VIEW){var a=jQuery.sap.byId(this.getId()+"connectionRow");this.toolPopup.setOpener(a);if(!this.toolPopup.isOpen()){this.toolPopup.setPosition(sap.ui.core.Popup.Dock.CenterBottom,sap.ui.core.Popup.Dock.CenterTop,a,"-10 0","fit");var p=jQuery.sap.byId(this.getId()+"toolpopup");this.toolPopup.open()}}}if(this.getShowOverlay()==true&&this.getLinkId()&&""!=this.getLinkId())this.fireEvent("connectionMouseover")}};
sap.landvisz.ConnectionEntity.prototype.onmouseleave=function(e){if(this.viewType==sap.landvisz.ViewType.SOLUTION_VIEW)e.stopImmediatePropagation();else{if(this.holdDisplay==false&&this.toolPopup.isOpen()){this.toolPopup.close()}if(this.getLinkId()&&""!=this.getLinkId())this.fireEvent("connectionMouseout")}};
sap.landvisz.ConnectionEntity.prototype.onAfterRendering=function(){var t=this;jQuery.sap.byId(this.getId()+"connectionRow").mouseleave(function(e){t.onmouseleave(e)});jQuery.sap.byId(this.getId()+"connectionRow").mouseenter(function(e){t.onmouseenter(e)})};
