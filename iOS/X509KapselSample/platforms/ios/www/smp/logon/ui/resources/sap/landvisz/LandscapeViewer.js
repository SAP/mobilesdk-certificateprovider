/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.landvisz.LandscapeViewer");jQuery.sap.require("sap.landvisz.library");jQuery.sap.require("sap.landvisz.Option");sap.landvisz.Option.extend("sap.landvisz.LandscapeViewer",{metadata:{publicMethods:["appendNavigationPath","getSelectedOption","getCurrentSolutionView"],library:"sap.landvisz",properties:{"defaultDependencyView":{type:"sap.landvisz.DependencyType",group:"Identification",defaultValue:sap.landvisz.DependencyType.NETWORK_VIEW},"height":{type:"int",group:"Dimension",defaultValue:null},"width":{type:"int",group:"Dimension",defaultValue:null},"title":{type:"string",group:"Data",defaultValue:null},"networkDependencyLabel":{type:"string",group:"Data",defaultValue:'Network View'},"boxDependencyLabel":{type:"string",group:"Data",defaultValue:'Box View'},"boxDependencyLevels":{type:"string[]",group:"Data",defaultValue:null},"showDependencyNavigator":{type:"boolean",group:"Identification",defaultValue:true},"visibleDependency":{type:"sap.landvisz.DependencyVisibility",group:"Identification",defaultValue:sap.landvisz.DependencyVisibility.BOTH},"viewType":{type:"sap.landvisz.ViewType",group:"Identification",defaultValue:null},"navigationPath":{type:"string",group:"Data",defaultValue:null},"hasParent":{type:"boolean",group:"Misc",defaultValue:true},"selectionViewPosition":{type:"sap.landvisz.SelectionViewPosition",group:"Identification",defaultValue:sap.landvisz.SelectionViewPosition.CENTER},"showClose":{type:"boolean",group:"Identification",defaultValue:true},"componentViewLabel":{type:"string",group:"Data",defaultValue:'Component View'},"deploymentViewLabel":{type:"string",group:"Data",defaultValue:'Deployment View'},"solutionOptionType":{type:"sap.landvisz.OptionType",group:"Identification",defaultValue:null},"solutionType":{type:"sap.landvisz.SolutionType",group:"Identification",defaultValue:null},"showDeploymentTypeSection":{type:"boolean",group:"Identification",defaultValue:false},"deploymentOptionsLabel":{type:"string",group:"Data",defaultValue:'Deployment Options :'},"deploymentOptionsTooltip":{type:"string",group:"Data",defaultValue:null},"componentViewTooltip":{type:"string",group:"Data",defaultValue:null},"deploymentViewTooltip":{type:"string",group:"Data",defaultValue:null},"closeButtonTooltip":{type:"string",group:"Data",defaultValue:null},"plugContentHeight":{type:"int",group:"Misc",defaultValue:0}},aggregations:{"systems":{type:"sap.landvisz.LandscapeEntity",multiple:true,singularName:"system"},"connectionEntities":{type:"sap.landvisz.ConnectionEntity",multiple:true,singularName:"connectionEntity"},"connectors":{type:"sap.landvisz.Connector",multiple:true,singularName:"connector"},"solutionOptions":{type:"sap.landvisz.Option",multiple:true,singularName:"solutionOption"},"plugContent":{type:"sap.ui.core.Control",multiple:false}},events:{"close":{},"loadSolutionView":{}}}});sap.landvisz.LandscapeViewer.M_EVENTS={'close':'close','loadSolutionView':'loadSolutionView'};jQuery.sap.require("sap.landvisz.internal.Connection");jQuery.sap.require("sap.landvisz.Option");jQuery.sap.require("sap.landvisz.libs.lvsvg");
sap.landvisz.LandscapeViewer.prototype.init=function(){this.initializationDone=false;this.windowHeight=0;this.windowWidth=0;this.connection=sap.landvisz.internal.Connection;this.boxModeHeight=90;this.currentView="";this.firstTime=true;this.boxLeftMargine=0;this.boxTopMargine=0;this.hasBoxThirdLevel=false;this.firstTime=true;this.lindkedEntities=[];var b=sap.ui.getCore().getLibraryResourceBundle("sap.landvisz");this.SHOW_ALL_TEXT=b.getText("SHOW_ALL");this.COLLAPSE_TEXT=b.getText("COLLAPSE_ALL");this.MAXIMIZE_TEXT=b.getText("MAXIMIZE");this.RESTORE_TEXT=b.getText("RESTORE");this.CLOSE=b.getText("CLOSE");this.srcEntity="";this.currentViewOptionId="";this.currentSolutionView="";this.selectedOptionEntity=null};
sap.landvisz.LandscapeViewer.prototype.onwindowresize=function(e){if(this.getHasParent()==false){var w=jQuery(window);var r=w.width();var a=w.height();this.windowHeight=a;this.windowWidth=r}else{var v=jQuery.sap.byId(this.getId());this.windowWidth=v[0].parentElement.clientWidth;this.windowHeight=v[0].parentElement.clientHeight}this.invalidate()};
sap.landvisz.LandscapeViewer.prototype.onclick=function(e){var s=this.getSystems();var a=s[0];var c=jQuery.sap.byId(this.getId()+"-container");var b=jQuery.sap.byId(a.getId());if(this.getViewType()==sap.landvisz.ViewType.SELECTION_VIEW&&e.srcControl.getTooltip()==this.MAXIMIZE_TEXT){if(e.srcControl.getTooltip()==this.SHOW_ALL_TEXT)a.expVisible=true;c.css({height:this.entityHeight,width:this.entityWidth});jQuery.sap.byId(a.getId()+"-CLVEntityVLayoutContainer").css({"display":"none"});this._animateMaximizeView(a,c);setTimeout(function(){jQuery.sap.byId(a.getId()+"-CLVEntityVLayoutContainer").css({"display":"block"});jQuery.sap.byId(a.getId()+"-CLVEntityVLayoutProperties").css({"display":"block"})},1000)}if(this.getViewType()==sap.landvisz.ViewType.SELECTION_VIEW&&e.srcControl.getTooltip()==this.RESTORE_TEXT){var d=this.windowWidth-40;var f=this.windowHeight;a.sViewWidth=d;a.sViewHeight=f;jQuery.sap.byId(a.getId()+"-CLVEntityVLayoutContainer").css({"display":"none"});this._animateRestoreView(a,c);setTimeout(function(){jQuery.sap.byId(a.getId()+"-CLVEntityVLayoutContainer").css({"display":"block"})},1000)}if(e.srcControl.getTooltip()==this.SHOW_ALL_TEXT&&a.entityMaximized!=true)this._animateShowAllView(a,c,b);if(e.srcControl.getTooltip()==this.SHOW_ALL_TEXT&&a.entityMaximized==true){a.sViewWidth=d;a.sViewHeight=f;this._animateSelectionView(c)}else if(e.srcControl.getTooltip()==this.COLLAPSE_TEXT&&this.entityMaximized!=true)this._animateCollapseView(c);else if(e.srcControl instanceof sap.landvisz.internal.SingleDataContainer&&a.explodeViewClosed==true)this._animateCollapseView(c)};
sap.landvisz.LandscapeViewer.prototype._animateCollapseView=function(c){var p=this.getSelectionViewPosition();if(p==sap.landvisz.SelectionViewPosition.CENTER){var l=(this.windowWidth-this.entityWidth)/2;var t=(this.windowHeight-this.entityHeight)/2}else if(p==sap.landvisz.SelectionViewPosition.LEFT){var l=20;var t=20}else if(p==sap.landvisz.SelectionViewPosition.RIGHT){var l=this.windowHeight-this.entityHeight-20;var t=20}c.animate({width:this.entityWidth,height:this.entityHeight,left:l,top:t,},1000)};
sap.landvisz.LandscapeViewer.prototype._animateSelectionView=function(c){var l;var t;var p=this.getSelectionViewPosition();if(p==sap.landvisz.SelectionViewPosition.CENTER){l=(this.windowWidth-this.entityWidth)/2;t=(this.windowHeight-this.entityHeight)/2}else if(p==sap.landvisz.SelectionViewPosition.LEFT){l=20;t=20}else if(p==sap.landvisz.SelectionViewPosition.RIGHT){l=this.windowWidth-this.entityWidth-20;t=20}c.animate({left:l,top:t,},1000)};
sap.landvisz.LandscapeViewer.prototype._animateShowAllView=function(s,c,a){var e=this.windowWidth-12;var b=this.windowHeight;s.sViewWidth=e-this.entityWidth;s.sViewHeight=b;s.left=0;s.top=0;a.css({"position":"relative"});c.animate({left:10,top:0,width:e,height:"100%",},1000);var d=jQuery.sap.byId("SMV");setTimeout(function(){d.animate({"display":"block"},1000)},1000)};
sap.landvisz.LandscapeViewer.prototype._animateMaximizeView=function(s,c){var e=this.windowWidth-40;var a=this.windowHeight-66;s.sViewWidth=e;s.sViewHeight=a;c.animate({left:20,top:20,width:e,height:a},1000)};
sap.landvisz.LandscapeViewer.prototype._animateRestoreView=function(s,c){var e=this.windowWidth-40;var a=this.windowHeight;s.sViewWidth=e;s.sViewHeight=a;var p=this.getSelectionViewPosition();var l;var t;if(p==sap.landvisz.SelectionViewPosition.CENTER){l=(this.windowWidth-this.entityWidth)/2;t=(this.windowHeight-this.entityHeight)/2}else if(p==sap.landvisz.SelectionViewPosition.LEFT){l=20;t=20}else if(p==sap.landvisz.SelectionViewPosition.RIGHT){l=this.windowHeight-this.entityHeight-20;t=20}c.animate({left:l,top:t,width:this.entityWidth,height:this.entityHeight},1000)};
sap.landvisz.LandscapeViewer.prototype.resetView=function(s,a){var c=jQuery.sap.byId(this.getId()+"-container");if(s.entityMaximized==true){s.entityMaximized=false;setTimeout(function(){s.invalidate()},1000);var e=this.windowWidth-40;var b=this.windowHeight;s.sViewWidth=e;s.sViewHeight=b;var p=this.getSelectionViewPosition();var l;var t;if(p==sap.landvisz.SelectionViewPosition.CENTER){l=(this.windowWidth-this.entityWidth)/2;t=(this.windowHeight-this.entityHeight)/2}else if(p==sap.landvisz.SelectionViewPosition.LEFT){l=20;t=20}else if(p==sap.landvisz.SelectionViewPosition.RIGHT){l=this.windowHeight-this.entityHeight-20;t=20}jQuery.sap.byId(s.getId()+"-CLVEntityVLayoutProperties").css({"display":"none"});c.animate({left:l,top:t,width:this.entityWidth,height:this.entityHeight},1000);setTimeout(function(){jQuery.sap.byId(s.getId()+"-CLVEntityVLayoutProperties").css({"display":"block"})},1000);setTimeout(function(){jQuery.sap.byId(a.getId()).click()},1000)}else if(s.expVisible==true){s.entityMaximized=false;s.expVisible=false;jQuery.sap.byId(s.oHLayoutMiniNavigation.getId()).css("display","block");s.showMiniNavigation=true;var h;var d=s.getDataContainers();var f;for(var i=0;i<s.dialogArray.length;i++){h=s.dialogArray[i];f=h.getProperties();if(f&&f.length&&f.length>0){for(var j=0;j<f.length;j++){d[i].addAggregation("properties",f[j],false)}}}for(var i=0;i<d.length;i++){if(i!=s.selectedIndex){d[i].visible=true}}s.nextIcon.setVisible(true);s.previousIcon.setVisible(true);jQuery.sap.byId("SMV").hide(700);s.invalidate();var l;var t;var p=this.getSelectionViewPosition();if(p==sap.landvisz.SelectionViewPosition.CENTER){l=(this.windowWidth-this.entityWidth)/2;t=(this.windowHeight-this.entityHeight)/2}else if(p==sap.landvisz.SelectionViewPosition.LEFT){l=20;t=20}else if(p==sap.landvisz.SelectionViewPosition.RIGHT){l=this.windowHeight-this.entityHeight-20;t=20}c.animate({left:l,top:t,},1000);setTimeout(function(){jQuery.sap.byId(a.getId()).click()},1000)}else jQuery.sap.byId(a.getId()).click()};
sap.landvisz.LandscapeViewer.prototype.initControls=function(){var i=this.getId();if(!this.oHLayoutConnectionEntity)this.oHLayoutConnectionEntity=new sap.ui.commons.layout.HorizontalLayout(i+"viewerConnectionEntityHLayout");if(!this.oHLayoutOptions)this.oHLayoutOptions=new sap.ui.commons.layout.HorizontalLayout(i+"viewerHLayoutOptions");this.entityWidth;this.entityHeight;this.networkViewVisible=false;this.boxViewVisible=false;if(!this.boxViewLabel)this.boxViewLabel=new sap.ui.commons.Label(i+"-viewBoxLabel");if(!this.boxViewImg)this.boxViewImg=new sap.ui.commons.Image(i+"-viewBoxImg");if(!this.networkViewLabel)this.networkViewLabel=new sap.ui.commons.Label(i+"-viewNetworkLabel");if(!this.closeImg)this.closeImg=new sap.ui.commons.Image(i+"-closeImg");if(!this.networkViewBtn)this.networkViewBtn=new sap.ui.commons.Button(i+"-viewNetworkBtn").addStyleClass("sapLandviszImg");if(!this.boxViewBtn)this.boxViewBtn=new sap.ui.commons.Button(i+"-viewBoxBtn").addStyleClass("sapLandviszImg");if(!this.compViewBtn)this.compViewBtn=new sap.ui.commons.Button(i+"-viewComponentBtn").addStyleClass("sapLandviszImg");if(!this.depViewBtn)this.depViewBtn=new sap.ui.commons.Button(i+"-viewDeployBtn").addStyleClass("sapLandviszImg");if(!this.navigationPathLabel)this.navigationPathLabel=new sap.ui.commons.Label(i+"navigationPathLabel");if(!this.deploymentOptionLabel)this.deploymentOptionLabel=new sap.ui.commons.Label(i+"deploymentOptionLabel");var s=this.getSystems()[0].getRenderingSize();if(s==sap.landvisz.EntityCSSSize.Small){this.entityWidth=Math.round(23.1*12);this.entityHeight=Math.round(16.5*12)}if(s==sap.landvisz.EntityCSSSize.RegularSmall){this.entityWidth=Math.round(33.7*12);this.entityHeight=Math.round(22.3*12)}if(s==sap.landvisz.EntityCSSSize.Regular){this.entityWidth=Math.round(38.7*12);this.entityHeight=Math.round(24.5*12)}if(s==sap.landvisz.EntityCSSSize.Medium){this.entityWidth=Math.round(43.5*12);this.entityHeight=Math.round(28*12)}if(s==sap.landvisz.EntityCSSSize.Large){this.entityWidth=Math.round(64.5*12);this.entityHeight=Math.round(41.5*12)}this.visibleEntities=[];this.depTypeOptions=new Object()};
sap.landvisz.LandscapeViewer.prototype.appendNavigationPath=function(n){var f=this.navigationPathLabel.getText()+"-->"+n;this.setNavigationPath(f);this.navigationPathLabel.setText(f)};
sap.landvisz.LandscapeViewer.prototype.onAfterRendering=function(){jQuery(window).unbind("resize",jQuery.proxy(this.onwindowresize,this));jQuery(window).bind("resize",jQuery.proxy(this.onwindowresize,this));if(this.getViewType()==sap.landvisz.ViewType.SOLUTION_VIEW){var a=this.getId()+"-solutionInnerContainer";var b=jQuery.sap.byId(a);var c;var d;var l;var t;var m=5;this.innerLeftMargine=b[0].offsetLeft;this.innerTopMargine=b[0].offsetTop;var s=this.getSystems();var c;var f;var g;var h;var j;for(var i=0;i<s.length;i++){c=jQuery.sap.byId(s[i].getId());f=s[i].left;g=s[i].top;h=f+this.innerLeftMargine;j=g+this.innerTopMargine;s[i].left=h;s[i].top=j;c.css({left:h,top:j})}var k=this.getConnectionEntities();var n=0;for(var i=0;i<k.length;i++){c=jQuery.sap.byId(k[i].getId());f=k[i].left;g=k[i].top;h=f+this.innerLeftMargine;j=g+this.innerTopMargine;n=k[i].top;k[i].left=h;k[i].top=j;c.css({left:h,top:j});var o=jQuery.sap.byId(k[i].getId()+"-connectionLabel");var p=k[i].width-68;o.css({"max-width":p,})}if(this.getSolutionType()==sap.landvisz.SolutionType.DEPLOYMENT_VIEW){var q=this.getId()+"-deploymentTypeContainer";var r=jQuery.sap.byId(q);var u=b[0].offsetWidth;var v=this.entityHeight+90+10;r.css({left:this.innerLeftMargine,top:v,width:u});if(null!=this.selectedOptionEntity){var w=this.depTypeOptions[this.selectedOptionEntity.getId()];if(this.getShowDeploymentTypeSection()==true&&w.length<=0){var x=b[0].offsetHeight-40;b.css({height:x})}}}if(this.getSolutionOptionType()==sap.landvisz.OptionType.ENTITY){var y=this.getId()+"-optionContainer";var z=jQuery.sap.byId(y);var u=b[0].offsetWidth-10;var A=this.entityHeight+90+10+5;if(this.getSolutionType()==sap.landvisz.SolutionType.DEPLOYMENT_VIEW){A=n}if(this.getShowDeploymentTypeSection()==true)A=A+40;z.css({left:this.innerLeftMargine+5,top:A,width:u})}if(this.getSolutionType()==sap.landvisz.SolutionType.COMPONENT_VIEW){this.compViewBtn.addStyleClass("selectedView");this.depViewBtn.removeStyleClass("selectedView")}else if(this.getSolutionType()==sap.landvisz.SolutionType.DEPLOYMENT_VIEW){this.depViewBtn.addStyleClass("selectedView");this.compViewBtn.removeStyleClass("selectedView")}}else if(this.getViewType()==sap.landvisz.ViewType.SELECTION_VIEW){var B=jQuery.sap.byId(this.getId()+"-container");var s=this.getSystems();var C=s[0];var D=jQuery.sap.byId(s[0].getId());if(s[0].entityMaximized==true)this._animateMaximizeView(C,B);else if(s[0].expVisible==true){var E=this.windowWidth-12;var F=this.windowHeight;C.sViewWidth=E-this.entityWidth;C.sViewHeight=F;D.css({"position":"relative"});B.css({left:10,top:0,width:E,height:"100%",});var G=jQuery.sap.byId("SMV");setTimeout(function(){G.css({"display":"block"},1000)},1000)}else this._animateSelectionView(B)}else if(this.getViewType()==sap.landvisz.ViewType.DEPENDENCY_VIEW&&this.currentView==sap.landvisz.DependencyType.NETWORK_VIEW){var H=this.getId()+"-boxViewContainer";var I=jQuery.sap.byId(H);this.boxLeftMargine=I[0].offsetLeft;this.boxTopMargine=I[0].offsetTop;I.css("display","none");var J=this.getBoxDependencyLevels();if(J){for(var i=0;i<J.length;i++){var K=this.getId()+"-boxViewLabel"+i;var L=jQuery.sap.byId(K);L.css("display","none")}}var M=jQuery.sap.byId(this.getId()+"-viewContainer");var N=M[0].scrollWidth-10;var O=M[0].scrollHeight-10;this.svgForConnections=sap.landvisz.libs.lvsvg.getSVG(N,O,this.getId()+"-viewContainer");this.connection=sap.landvisz.internal.Connection;this.connection.svgForConnections=this.svgForConnections;this.connection.renderConnections(this.getSystems(),this.getConnectionEntities())}else if(this.getViewType()==sap.landvisz.ViewType.DEPENDENCY_VIEW&&this.currentView==sap.landvisz.DependencyType.BOX_VIEW){var H=this.getId()+"-boxViewContainer";var I=jQuery.sap.byId(H);var c;var d;var l;var t;var m=5;this.boxLeftMargine=I[0].offsetLeft;this.boxTopMargine=I[0].offsetTop;var P=30;var Q=this.entityHeight;var s=this.getSystems();var c;var f;var g;var h;var j;for(var i=0;i<s.length;i++){c=jQuery.sap.byId(s[i].getId());f=s[i].left;g=s[i].top;h=f+this.boxLeftMargine;j=g+this.boxTopMargine;s[i].left=h;s[i].top=j;c.css({left:h,top:j})}var k=this.getConnectionEntities();for(var i=0;i<k.length;i++){c=jQuery.sap.byId(k[i].getId());f=k[i].left;g=k[i].top;h=f+this.boxLeftMargine;j=g+this.boxTopMargine;k[i].left=h;k[i].top=j;c.css({left:h,top:j})}var R=this.boxLeftMargine+m;var S=this.boxModeHeight+(m*2)+this.boxTopMargine;var J=this.getBoxDependencyLevels();var T="Systems";var U="Systems";var V=this;if(J){setTimeout(function(){for(var i=0;i<J.length;i++){if(V.hasBoxThirdLevel==true){var K=V.getId()+"-boxViewLabel"+i;var L=jQuery.sap.byId(K);S+=((V.entityHeight+m)*i);L.css({left:R,top:S,width:P,height:Q,display:"block"});var e=jQuery.sap.byId(K+"Level");e.css({width:Q,height:Q,})}}},1000)}}if(this.getViewType()==sap.landvisz.ViewType.DEPENDENCY_VIEW&&this.currentView==sap.landvisz.DependencyType.NETWORK_VIEW){this.networkViewBtn.addStyleClass("selectedView");this.boxViewBtn.removeStyleClass("selectedView")}if(this.getViewType()==sap.landvisz.ViewType.DEPENDENCY_VIEW&&this.currentView==sap.landvisz.DependencyType.BOX_VIEW){this.boxViewBtn.addStyleClass("selectedView");this.networkViewBtn.removeStyleClass("selectedView")}if(this.getViewType()==sap.landvisz.ViewType.DEPENDENCY_VIEW){var W=jQuery.ui?jQuery.ui.version||"pre 1.6":'jQuery-UI not detected';jQuery.sap.require("sap.ui.thirdparty.jqueryui.jquery-ui-core");jQuery.sap.require("sap.ui.thirdparty.jqueryui.jquery-ui-widget");jQuery.sap.require("sap.ui.thirdparty.jqueryui.jquery-ui-mouse");jQuery.sap.require("sap.ui.thirdparty.jqueryui.jquery-ui-draggable");jQuery.sap.require("sap.ui.thirdparty.jqueryui.jquery-ui-droppable");var B=jQuery.sap.byId(this.getId()+"-viewContainer");var X=jQuery.sap.byId(this.getId()+"-navigation");var V=this;var B=jQuery.sap.byId(this.getId()+"-viewContainer");var Y=Number(B[0].scrollHeight);var Z=Number(B[0].scrollWidth);var $=Number(B.height());var _=Number(B.width());if((Z>_)||(Y>$)){if(X.css('display')=='none'){X.show(0);V.getVisibleRegion(0);X.hide(0)}else{V.getVisibleRegion(0)}}else X.hide(0);var a1=jQuery.sap.byId(this.getId()+"-navigation_navigator");var V=this;a1.bind('drag',function(e){V.calculateNavigationMovement(B,a1)});a1.draggable({containment:X});var b1=jQuery.sap.byId(this.getId()+"-navigation_header_arrowdown");var c1=jQuery.sap.byId(this.getId()+"-navigation_header_arrowup");b1.show();b1.click(function(e){X.animate({height:'0px'},1000,"swing",function(e){a1.hide()});b1.hide();c1.show();e.stopPropagation()});c1.click(function(e){X.animate({height:'29%'},1000,"swing");c1.hide();b1.show();a1.show();e.stopPropagation()});X.bind('drag');X.draggable({cancel:"div.navigationHeader",containment:B})}};
sap.landvisz.LandscapeViewer.prototype.calculateNavigationMovement=function(m,n){var h=m.height()/n.height();var w=m.width()/n.width();m.scrollTop((n.css('top').split('px')[0])*h);m.scrollLeft((n.css('left').split('px')[0])*w);var c=this.getConnectionEntities();for(var i=0;i<c.length;i++){if(this.getVisibleDependency()==sap.landvisz.DependencyVisibility.BOTH&&this.currentView==sap.landvisz.DependencyType.NETWORK_VIEW){if(c[i].toolPopup.isOpen())c[i].toolPopup.close()}}};
sap.landvisz.LandscapeViewer.prototype.getVisibleRegion=function(){var a=jQuery.sap.byId(this.getId()+"-viewContainer");var n=jQuery.sap.byId(this.getId()+"-navigation");var b=jQuery.sap.byId(this.getId()+"-navigation_navigator");n.css({height:'29%'});setTimeout(function(){sap.landvisz.libs.lvsvg.convertHtmltoCanvas(a,n)},1000);n.hide();setTimeout(function(){n.show("slow");n.animate({height:'29%'},100,"swing",function(e){b.show("slow")});var f=Number(a[0].scrollHeight);var c=Number(a[0].scrollWidth);var d=Number(a.height());var g=Number(a.width());var h=d/f;var w=g/c;setTimeout(function(){var e=Number(n[0].scrollHeight);var i=Number(n[0].scrollWidth);b.height(e*h);b.width(i*w);b.show();b.css({left:0,top:0})},1500)},1000)};
sap.landvisz.LandscapeViewer.prototype.onmouseenter=function(e){var s=e.oSource;var a=e.target;var c;var b;var h=false;var d=false;var f=0;for(var i=0;i<this.getConnectionEntities().length;i++){if(this.getConnectionEntities()[i].holdDisplay==true){d=true;f++}}if((!d)||(f>1)){if(s instanceof sap.landvisz.ConnectionEntity){this.lindkedEntities=[];var g=this.getConnectionEntities();for(var i=0;i<g.length;i++){if(s.getId()!=g[i].getId()){jQuery.sap.byId(g[i].getId()+"connectionRow").css({"box-shadow":"none"});g[i].holdDisplay=false;g[i].toolPopup.close()}else{jQuery.sap.byId(g[i].getId()+"connectionRow").css({"box-shadow":"rgb(0, 0, 0) 0px 0px 20px"})}}c=this.getConnectors();for(var i=0;i<c.length;i++){if(c[i].getSource()==s.getConnectionId())this.lindkedEntities.push(c[i].getTarget());if(c[i].getTarget()==s.getConnectionId())this.lindkedEntities.push(c[i].getSource())}b=this.getSystems();var l;var m;for(var i=0;i<b.length;i++){l=false;for(var j=0;j<this.lindkedEntities.length;j++){if(b[i].getSystemId()==this.lindkedEntities[j]){l=true;if(s.getLinkedHeader()&&""!=s.getLinkedHeader()){h=false;for(var k=0;k<b[i].propertyHeaders.length;k++){m=b[i].propertyHeaders[k];if(s.getLinkedHeader()==m.getHeader()){if(m.getSelected()!=true){m.setSelected(true);b[i].selectedIndex=k;h=true}else{b[i].selectedIndex=k;this.filterOverlay(b[i],s.getLinkId());jQuery.sap.byId(b[i].getId()+"-innerOverlay").css({"display":"block"});jQuery.sap.byId(b[i].getId()+"-overlay").css({"display":"block"})}}else b[i].propertyHeaders[k].setSelected(false);b[i].showOverlay=false;b[i].overlayFilter=""}if(h==true&&b[i].showOverlay==false){b[i].showOverlay=true;b[i].overlayFilter=s.getLinkId();b[i].invalidate()}}}}if(l==false){if(b[i].showOverlay==true)b[i].invalidate();else{jQuery.sap.byId(b[i].getId()+"-innerOverlay").css({"display":"none"});jQuery.sap.byId(b[i].getId()+"-overlay").css({"display":"none"})}b[i].showOverlay=false;b[i].overlayFilter=""}}}}};
sap.landvisz.LandscapeViewer.prototype.filterOverlay=function(s,f){var h=s.oVLayoutOverlay.getContent();var r;var l;for(var j=0;j<h.length;j++){r=h[j];if(r instanceof sap.landvisz.internal.NestedRowField){l=r.getLinearRows();for(var k=0;k<l.length;k++){if(f==l[k].getLinkSource()){jQuery.sap.byId(r.getId()).css({display:"block",});jQuery.sap.byId(l[k].getId()).css({display:"block",})}else{jQuery.sap.byId(r.getId()).css({display:"none",});jQuery.sap.byId(l[k].getId()).css({display:"none",})}}}else{if(f==r.getLinkSource()){jQuery.sap.byId(r.getId()).css({display:"block",})}else{jQuery.sap.byId(r.getId()).css({display:"none",})}}}};
sap.landvisz.LandscapeViewer.prototype.showAllOverlay=function(s,f){var h=s.oVLayoutOverlay.getContent();var r;for(var j=0;j<h.length;j++){r=h[j];jQuery.sap.byId(r.getId()).css({display:"block",})}};
sap.landvisz.LandscapeViewer.prototype.showOverlay=function(i,o){jQuery.sap.byId(i+"-overlay").css({display:o,});jQuery.sap.byId(i+"-innerOverlay").css({display:o,})};
sap.landvisz.LandscapeViewer.prototype.onmouseleave=function(e){var s=e.oSource;var a=e.target;this.lindkedEntities=[];var c;var b;var h=false;var d=false;var f=0;for(var i=0;i<this.getConnectionEntities().length;i++){if(this.getConnectionEntities()[i].holdDisplay==true){d=true;f++}}if(!(d&&f<2)){if(s instanceof sap.landvisz.ConnectionEntity){if(s.holdDisplay!=true){jQuery.sap.byId(s.getId()+"connectionRow").css({"box-shadow":"none"});c=this.getConnectors();for(var i=0;i<c.length;i++){if(c[i].getSource()==s.getConnectionId())this.lindkedEntities.push(c[i].getTarget());if(c[i].getTarget()==s.getConnectionId())this.lindkedEntities.push(c[i].getSource())}b=this.getSystems();for(var i=0;i<b.length;i++){for(var j=0;j<this.lindkedEntities.length;j++){if(b[i].getSystemId()==this.lindkedEntities[j]){jQuery.sap.byId(b[i].getId()+"-innerOverlay").css({"display":"none"});jQuery.sap.byId(b[i].getId()+"-overlay").css({"display":"none"});b[i].showOverlay=false;b[i].overlayFilter=""}}}}}}};
sap.landvisz.LandscapeViewer.prototype.getCurrentSolutionView=function(){return this.currentSolutionView};
sap.landvisz.LandscapeViewer.prototype.getCurrentDependencyView=function(){return this.currentView};
sap.landvisz.LandscapeViewer.prototype.setEnableLoadSolution=function(e){if(e==false){this.compViewBtn.addStyleClass("sapLandviszBtnDisable");this.depViewBtn.addStyleClass("sapLandviszBtnDisable")}else if(e==true){this.compViewBtn.removeStyleClass("sapLandviszBtnDisable");this.depViewBtn.removeStyleClass("sapLandviszBtnDisable")}this.compViewBtn.setEnabled(e);this.depViewBtn.setEnabled(e)};
sap.landvisz.LandscapeViewer.prototype.getSelectedOption=function(){return this.selectedOptionEntity};
sap.landvisz.LandscapeViewer.prototype.onfocusout=function(e){this.compViewBtn};
sap.landvisz.LandscapeViewer.prototype.fetchSelectedOption=function(){return this.selectedOptionEntity};
sap.landvisz.LandscapeViewer.prototype.exit=function(){jQuery(window).unbind("resize",jQuery.proxy(this.onwindowresize,this))};
sap.landvisz.LandscapeViewer.prototype.getViewConnectedLayout=function(){var c;var s;var o;var s;var a=this.getConnectors();o=this.oHLayoutOptions.getContent();for(var y=1;y<o.length;y++){if(o[y].getSelected()==true){s=o[y].getOptionSources();break}}var b=a[0].getSource();var d=[];var e;var f;for(var i=0;i<s.length;i++){e=new sap.landvisz.Connector();f=s[i].getSource();e.setSource(b);e.setTarget(f);d.push(e)}c=this.connection.getBoxViewConnectedNodesLayout(d);return c};
sap.landvisz.LandscapeViewer.prototype.getEntityConnectedLayout=function(){var c;var o;var a=this.getConnectors();var b;var d=[];for(var i=0;i<a.length;i++){b=this.getOptionConnector(a[i]);if(""!==b)d.push(b);else d.push(a[i])}c=this.connection.getBoxViewConnectedNodesLayout(d);return c};
sap.landvisz.LandscapeViewer.prototype.getOptionConnector=function(c){var o=this.getSolutionOptions();var a;var s;var e;var b;for(var x=0;x<o.length;x++){if(o[x].getCurrentEntity()==c.getTarget()){a=o[x].getOptionEntities();for(var y=0;y<a.length;y++){b=a[y].getOptionSources()[0].getSource();if(a[y].getSelected()==true&&b!=c.getTarget()){e=new sap.landvisz.Connector();e.setSource(c.getSource());a[y].getOptionSources()[0].getSource();e.setTarget(a[y].getOptionSources()[0].getSource());this.srcEntity=b;return e}}}}return""};
