/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2014 SAP SE. All rights reserved
 */
sap.ui.define(["sap/ui/fl/Utils"],function(U){var C=function(f,d){if(typeof(f)!=="object"){jQuery.sap.log.error("Constructor : sap.ui.fl.Change : oFile is not defined")}if(typeof(d)!=="function"){jQuery.sap.log.error("Constructor : sap.ui.fl.Change : fDeleteChange is not defined")}if(!f.layer){jQuery.sap.log.error("Constructor : sap.ui.fl.Change : oFile.layer is not defined")}this._oDefinition=f;this._oOriginDefinition=JSON.parse(JSON.stringify(f));this._sRequest='';this._fDelete=d;this._bIsDeleted=false;this._bUserDependent=(f.layer==="USER")};C.prototype.isValid=function(){var i=true;if(typeof(this._oDefinition)!=="object"){i=false}if(typeof(this._fDelete)!=="function"){i=false}if(!this._oDefinition.fileType){i=false}if(!this._oDefinition.fileName){i=false}if(!this._oDefinition.changeType){i=false}if(!this._oDefinition.layer){i=false}if(!this._oDefinition.originalLanguage){i=false}return i};C.prototype.isVariant=function(){return this._oDefinition.fileType==="variant"};C.prototype.getChangeType=function(){if(this._oDefinition){if(this._oDefinition.changeType){return this._oDefinition.changeType}else if(this._oDefinition.type){return this._oDefinition.type}}};C.prototype.getOriginalLanguage=function(){if(this._oDefinition&&this._oDefinition.originalLanguage){return this._oDefinition.originalLanguage}return""};C.prototype.getPackage=function(){return this._oDefinition.packageName};C.prototype.getNamespace=function(){return this._oDefinition.namespace};C.prototype.getId=function(){return this._oDefinition.fileName};C.prototype.getContent=function(){return this._oDefinition.content};C.prototype.setContent=function(c){this._oDefinition.content=c};C.prototype.getSelector=function(){return this._oDefinition.selector};C.prototype.getText=function(t){if(typeof(t)!=="string"){jQuery.sap.log.error("sap.ui.fl.Change.getTexts : sTextId is not defined")}if(this._oDefinition.texts){if(this._oDefinition.texts[t]){return this._oDefinition.texts[t].value}}return""};C.prototype.setText=function(t,n){if(typeof(t)!=="string"){jQuery.sap.log.error("sap.ui.fl.Change.setTexts : sTextId is not defined");return}if(this._oDefinition.texts){if(this._oDefinition.texts[t]){this._oDefinition.texts[t].value=n}}};C.prototype.isReadOnly=function(){var i=false;if(this._isReadOnlyDueToLayer()){i=true}else if(this._isReadOnlyDueToOriginalLanguage()){i=true}return i};C.prototype.isLabelEditable=function(){return this._isReadOnlyDueToOriginalLanguage()};C.prototype.getModificationFlags=function(){var f='RDW';if(this._isReadOnlyDueToLayer()){f='R'}else if(this._isReadOnlyDueToOriginalLanguage()){f='RD'}return f};C.prototype._isReadOnlyDueToLayer=function(){var c;c=U.getCurrentLayer(this._bUserDependent);return(this._oDefinition.layer!==c)};C.prototype._isReadOnlyDueToOriginalLanguage=function(){var c,o;o=this.getOriginalLanguage();if(!o){return false}c=U.getCurrentLanguage();return(c!==o)};C.prototype.markForDeletion=function(){this._bIsDeleted=true;this._fDelete(this.getId())};C.prototype._isDirty=function(){var c=JSON.stringify(this._oDefinition);var o=JSON.stringify(this._oOriginDefinition);return(c!==o)};C.prototype.setRequest=function(r){if(typeof(r)!=="string"){jQuery.sap.log.error("sap.ui.fl.Change.setRequest : sRequest is not defined")}this._sRequest=r};C.prototype.getRequest=function(){return this._sRequest};C.prototype.getLayer=function(){return this._oDefinition.layer};C.prototype.getComponent=function(){return this._oDefinition.component};C.prototype.getCreation=function(){return this._oDefinition.creation};C.prototype.isUserDependent=function(){return(this._bUserDependent)};C.prototype.getPendingAction=function(){if(this._bIsDeleted){return"DELETE"}else if(!this._oDefinition.creation){return"NEW"}else if(this._isDirty()===true){return"UPDATE"}return"NONE"};C.prototype.getDefinition=function(){return this._oDefinition};C.prototype.setResponse=function(r){var R=JSON.stringify(r);if(R){this._oDefinition=JSON.parse(R);this._oOriginDefinition=JSON.parse(R)}};C.createInitialFileContent=function(p){if(!p){p={}}var n={fileName:p.id||jQuery.sap.uid().replace(/-/g,"_"),fileType:(p.isVariant)?"variant":"change",changeType:p.changeType||"",component:p.componentName||"",packageName:p.packageName||"",content:p.content||{},selector:p.selector||{},layer:U.getCurrentLayer(p.isUserDependent),texts:p.texts||{},namespace:p.namespace||"",creation:"",originalLanguage:U.getCurrentLanguage(),conditions:{},support:{generator:"Change.createInitialFileContent",service:p.service||"",user:""}};return n};return C},true);
