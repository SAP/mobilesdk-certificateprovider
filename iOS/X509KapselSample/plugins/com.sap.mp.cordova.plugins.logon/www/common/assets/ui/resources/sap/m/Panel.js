/*!
 * SAP UI development toolkit for HTML5 (SAPUI5/OpenUI5)
 * (c) Copyright 2009-2015 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['jquery.sap.global','./library','sap/ui/core/Control'],function(q,l,C){"use strict";var P=C.extend("sap.m.Panel",{metadata:{library:"sap.m",properties:{headerText:{type:"string",group:"Data",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:'100%'},height:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:'auto'},expandable:{type:"boolean",group:"Appearance",defaultValue:false},expanded:{type:"boolean",group:"Appearance",defaultValue:false},expandAnimation:{type:"boolean",group:"Behavior",defaultValue:true}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"},headerToolbar:{type:"sap.m.Toolbar",multiple:false},infoToolbar:{type:"sap.m.Toolbar",multiple:false}},events:{expand:{parameters:{expand:{type:"boolean"}}}}}});P.prototype.init=function(){this.data("sap-ui-fastnavgroup","true",true)};P.prototype.setWidth=function(w){this.setProperty("width",w,true);var d=this.getDomRef();if(d){d.style.width=w}return this};P.prototype.setHeight=function(h){this.setProperty("height",h,true);var d=this.getDomRef();if(d){d.style.height=h;this._setContentHeight()}return this};P.prototype.setExpandable=function(e){this.setProperty("expandable",e,false);if(e&&!this.oIconCollapsed){q.sap.require("sap.ui.core.IconPool");var c=sap.ui.core.IconPool.getIconURI("navigation-right-arrow");var t=this;var i=sap.ui.core.IconPool.createControlByURI({id:t.getId()+"-CollapsedImg",src:c}).addStyleClass("sapMPanelExpandableIcon").attachPress(function(E){t.setExpanded(!t.getExpanded())});i.setDecorative(false);this.oIconCollapsed=i}return this};P.prototype.setExpanded=function(e){if(e===this.getExpanded()){return}this.setProperty("expanded",e,true);if(!this.getExpandable()){return}var $=this.$();$.find(".sapMPanelExpandableIcon").toggleClass("sapMPanelExpandableIconExpanded");var o={};if(!this.getExpandAnimation()){o.duration=0}$.find(".sapMPanelExpandablePart").slideToggle(o);$.find(".sapMPanelWrappingDiv").toggleClass("sapMPanelWrappingDivExpanded");this.fireExpand({expand:e});return this};P.prototype.onAfterRendering=function(){var $=this.$();this._setContentHeight();if(this.getExpandable()){if(this.getExpanded()){$.find(".sapMPanelWrappingDiv").addClass("sapMPanelWrappingDivExpanded")}else{$.find(".sapMPanelExpandablePart").hide()}}};P.prototype.exit=function(){if(this.oIconCollapsed){this.oIconCollapsed.destroy();delete this.oIconCollapsed}};P.prototype._getIcon=function(){return this.oIconCollapsed};P.prototype._setContentHeight=function(){if(this.getHeight()==="auto"){return}var h=0,H=this.getHeaderToolbar(),i=this.getInfoToolbar(),$=this.$();if(H){h+=parseInt(H.$().outerHeight(),10)}if(!H&&this.getHeaderText()!==""){h+=parseInt($.find(".sapMPanelHdr").outerHeight(),10)}if(i){h+=parseInt(i.$().outerHeight(),10)}$.find(".sapMPanelContent").css("height",parseInt($.outerHeight(),10)-h)};return P},true);
