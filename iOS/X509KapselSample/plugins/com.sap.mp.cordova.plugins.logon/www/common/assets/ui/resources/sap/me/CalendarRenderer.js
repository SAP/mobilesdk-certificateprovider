/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 *         (c) Copyright 2009-2014 SAP SE. All rights reserved
 *     
 */
jQuery.sap.declare("sap.me.CalendarRenderer");jQuery.sap.require("sap.me.CalendarDate");jQuery.sap.require("sap.ui.core.LocaleData");jQuery.sap.require("sap.ui.core.format.DateFormat");sap.me.CalendarRenderer={};
sap.me.CalendarRenderer.render=function(r,c){if(!c.getVisible()){return}r.write("<div");r.writeControlData(c);r.addClass("sapMeCalendar");var C="sapMeCalendar"+c.getDesign();r.addClass(C);r.writeClasses();var w=c.getWidth();if(w!=undefined){r.addStyle("width",w);r.writeStyles()}r.write(">");r.renderControl(c._oPrevBtn);r.renderControl(c._oNextBtn);var s=c.getSingleRow();var m=s?1:c.getMonthsToDisplay();var n=new sap.me.CalendarDate();var N=n.toDateString();var i;if(m===1){this._renderMonth(r,c,c._oInternalDate.getDateObject(),N)}else{var a=c._oInternalDate.getCopyDateObject();var M=Math.floor(m/2);for(i=0;i<M;i++){a=sap.me.CalendarDate.getPreviousMonth(a)}for(i=0;i<m;i++){this._renderMonth(r,c,a,N);a=sap.me.CalendarDate.getNextMonth(a)}}r.write("</div>")};
sap.me.CalendarRenderer._formatDate=function(d,p){var a=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:p});return a.format(d)};
sap.me.CalendarRenderer._getDateIntervalText=function(d,D,c){var o,a;if(d.getTime()<=D.getTime()){o=d;a=D}else{o=D;a=d}var i=c._getIntervalPattern("yMMM-y");var I=this._getIntervalSeparator(i,c);var p=i.split(I);return this._formatDate(o,p[0])+I+this._formatDate(a,p[1])};
sap.me.CalendarRenderer._getMonthAndYear=function(d,c){var p=c._getIntervalPattern("yMMM-y");var i=this._getIntervalSeparator(p,c);var P=p.split(i);return this._formatDate(d,P[0])};
sap.me.CalendarRenderer._getIntervalSeparator=function(p,c){var f=c._getIntervalPattern("");var i=f.replace("{0}","").replace("{1}","").trim();if(c._checkLanguageRegion("zh","CN")){if(-1===p.indexOf(i)){i=c._getIntervalPattern("MMM-M").replace(/L/g,"").trim()}}return i};
sap.me.CalendarRenderer._renderMonth=function(r,c,m,d){var s=c.getSingleRow();var f=c.getFirstDayOffset();var w=c.getDays();var W=w.length;var a=c.getWeeksPerRow();var D=a*W;var b=(100/D);var e=c.getDayHeight();var M=(100/(s?1:c.getMonthsPerRow()));var g=new sap.me.CalendarDate.createDate(m.getFullYear(),m.getMonth(),m.getDate());var C=g.getDate();var h=g.getDay();g.setDate(1);var j=g.getDay();if(j<f){j+=7}var k=g.getMonth();var l=new Date(g.getYear(),k+1,0);var n=l.getDate();var o=s?h+1-f:C+j-f;var p=Math.ceil((n+o-C)/7);var t=s?D:(p*7);var q=this._getMonthAndYear(g,c);g.setDate(C-o+1);if(s){var u=new Date(g.getTime());u.setDate(u.getDate()+t-1);if(g.getFullYear()!==u.getFullYear()||g.getMonth()!==u.getMonth()){q=this._getDateIntervalText(g,u,c)}}r.write('<div');r.addClass("sapMeCalendarMonth");if(!s){r.addClass("sapMeCalendarMonthNotSingle")}r.writeClasses();r.addStyle("width",M+"%");r.writeStyles();r.write(">");r.write('<div');r.addClass("sapMeCalendarMonthName");r.writeClasses();if(c.getHideMonthTitles()){r.addStyle("visibility","hidden");r.writeStyles()}r.write(">");r.writeEscaped(q);r.write("</div>");r.write('<div');r.addClass("sapMeCalendarMonthDayNames");r.writeClasses();r.write(">");var i;for(i=0;i<D;i++){var v=w[(i+f)%W];this._renderDay(r,c,null,v,b)}r.write('</div>');r.write('<div');r.addClass("sapMeCalendarMonthDays");r.writeClasses();r.write(">");for(i=0;i<t;i++){var x=g.getMonth();var y=g.getDay();h=g.getDate();var N=x!==k;var I=g.toDateString();var z=I==d;this._renderDay(r,c,I,h+"",b,e,y,N,z);g.setDate(g.getDate()+1)}r.write('</div>');r.write('</div>')};
sap.me.CalendarRenderer._renderDay=function(r,c,i,C,d,D,a,n,I){r.write("<div");r.addClass("sapMeCalendarMonthDay");if(I){r.addClass("sapMeCalendarDayNow")}if(n&&!c.getSingleRow()){r.addClass("sapMeCalendarDayNotInCurrentMonth")}if(typeof a=="number"){r.addClass("sapMeCalendarWeekDay"+a)}r.writeClasses();r.addStyle("width",d+"%");if(D){r.addStyle("height",D+"px")}r.writeStyles();if(i!=null){var s=i.replace(/\s/g,"-");r.writeAttribute('id',c.getId()+"-"+s)}r.write(">");r.write('<span>');r.writeEscaped(C);r.write("</span>");if(i!=null){r.write('<input type="hidden" value="'+i+'"></input>')}r.write("</div>")};
