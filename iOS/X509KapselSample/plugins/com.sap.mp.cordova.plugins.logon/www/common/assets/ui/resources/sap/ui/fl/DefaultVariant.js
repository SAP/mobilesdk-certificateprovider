/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2014 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/ui/fl/Change"],function($,C){"use strict";var D=function(){};D.prototype.getDefaultVariantId=function(c){var d=this.getNewestDefaultVariantChangeDeleteTheRest(c);if(d){return d.getContent().defaultVariantName}return""};D.prototype.getNewestDefaultVariantChangeDeleteTheRest=function(c){var d=this.getDefaultVariantChanges(c).sort(function(a,b){var e=new Date(a.getCreation());var f=new Date(b.getCreation());if(isNaN(e.getDate())){return-1}if(isNaN(f.getDate())){return 1}return f-e});var n=d.shift();d.forEach(function(o){o.markForDeletion()});return n};D.prototype.getDefaultVariantChanges=function(c){if(!c||typeof c!=='object'){return[]}return Object.keys(c).map(a).filter(d);function a(s){return c[s]}function d(o){return o.getChangeType()==='defaultVariant'}};D.prototype.updateDefaultVariantId=function(c,n){var N=this.getNewestDefaultVariantChangeDeleteTheRest(c);if(N){N.getContent().defaultVariantName=n}return N};D.prototype._createChangeFile=function(p){var f;p.namespace=p.component+'/changes/default';p.componentName=p.component;p.changeType='defaultVariant';f=C.createInitialFileContent(p);f.content.defaultVariantName=p.defaultVariantId;f.layer='USER';return f};D.prototype.createChangeObject=function(p,d){var f,c;f=this._createChangeFile(p);c=new C(f,d);return c};return new D()},true);
